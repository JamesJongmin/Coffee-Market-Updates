name: Update Reports List

on:
  push:
    paths:
      - 'Reports/**/*.html'
  workflow_dispatch:

jobs:
  update-reports:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Create reports.json
      run: |
        echo '{
          "reports": [
            {
              "date": "2025-06-09",
              "displayDate": "2025년 6월 9일",
              "title": "커피 선물 시장 주간 동향",
              "subtitle": "Coffee Futures Market Weekly Update",
              "summary": "2025년 6월 9일 커피 시장 분석 보고서입니다.",
              "tags": ["아라비카", "로부스타", "시장분석", "주간동향"],
              "link": "Reports/2025/06/2025-06-09.html",
              "year": "2025",
              "month": "06"
            },
            {
              "date": "2025-06-08",
              "displayDate": "2025년 6월 8일", 
              "title": "커피 선물 시장 주간 동향",
              "subtitle": "Coffee Futures Market Weekly Update",
              "summary": "커피 선물이 5주간 연속 하락세를 지속했습니다.",
              "tags": ["아라비카", "로부스타", "브라질생산량"],
              "link": "Reports/2025/06/2025-06-08.html",
              "year": "2025",
              "month": "06"
            },
            {
              "date": "2025-05-31",
              "displayDate": "2025년 5월 31일",
              "title": "커피 선물 시장 주간 동향", 
              "subtitle": "Coffee Futures Market Weekly Update",
              "summary": "커피 선물 시장이 새로운 저점을 기록했습니다.",
              "tags": ["아라비카", "로부스타", "브라질생산"],
              "link": "Reports/2025/05/2025-05-31.html",
              "year": "2025",
              "month": "05"
            }
          ]
        }' > reports.json
        
    - name: Commit and push
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git add reports.json
        git diff --staged --quiet || git commit -m "Update reports.json"
        git push
