<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Coffee Market In-depth Analysis - Ïª§Ìîº ÏãúÏû• Ïã¨Ï∏µ Î∂ÑÏÑù Î≥¥Í≥†ÏÑú">
    <title>In-depth Analysis - Coffee Market Updates</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles/common.css" as="style">
    <link rel="stylesheet" href="styles/common.css">
    
    <style>
        /* Page-specific styles */
        .analysis-hero {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
            color: white;
            padding: 48px 24px;
            border-radius: var(--radius-xl);
            margin-bottom: 40px;
            text-align: center;
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }

        .analysis-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 30s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .analysis-title {
            font-size: clamp(1.75rem, 5vw, 2.75rem);
            font-weight: 700;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
        }

        .analysis-subtitle {
            font-size: 1.25rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        /* Info Section Enhanced */
        .info-card {
            background: white;
            padding: 32px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            margin-bottom: 40px;
            border-top: 4px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        .info-card::after {
            content: 'üîç';
            position: absolute;
            right: -20px;
            bottom: -20px;
            font-size: 120px;
            opacity: 0.05;
            transform: rotate(-15deg);
        }

        .info-header {
            font-size: 1.75rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .info-text {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(139, 69, 19, 0.05);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }

        .feature-item:hover {
            background: rgba(139, 69, 19, 0.1);
            transform: translateX(4px);
        }

        .feature-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
            color: var(--primary-color);
        }

        /* Analysis Reports Grid */
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        /* Enhanced Report Card */
        .analysis-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 28px;
            box-shadow: var(--shadow-md);
            transition: all var(--transition-normal);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border-top: 3px solid transparent;
            border-image: linear-gradient(90deg, var(--primary-color), var(--primary-light));
            border-image-slice: 1;
        }

        .analysis-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 69, 19, 0.05), transparent);
            transition: left 0.5s ease;
        }

        .analysis-card:hover::before {
            left: 100%;
        }

        .analysis-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-xl);
        }

        .analysis-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .analysis-date {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 0.875rem;
        }

        .analysis-heading {
            font-size: 1.375rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .analysis-summary {
            color: var(--text-secondary);
            font-size: 0.9375rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .analysis-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .analysis-link {
            color: var(--primary-color);
            font-weight: 600;
            text-decoration: none;
            font-size: 0.9375rem;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            transition: all var(--transition-fast);
        }

        .analysis-link:hover {
            gap: 8px;
            color: var(--primary-dark);
        }

        /* Loading & Empty States */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .empty-state h3 {
            color: var(--text-secondary);
            font-size: 1.5rem;
            margin-bottom: 12px;
        }

        /* Back Button Enhanced */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
            color: white;
            padding: 12px 24px;
            border-radius: var(--radius-round);
            text-decoration: none;
            font-weight: 600;
            transition: all var(--transition-normal);
            margin-bottom: 32px;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .back-link::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .back-link:hover::before {
            width: 300px;
            height: 300px;
        }

        .back-link:hover {
            transform: translateX(-4px);
            box-shadow: var(--shadow-lg);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .analysis-hero {
                padding: 32px 20px;
            }
            
            .info-card {
                padding: 24px;
            }
            
            .feature-list {
                grid-template-columns: 1fr;
            }
            
            .analysis-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">
            ‚Üê Î©îÏù∏ ÌéòÏù¥ÏßÄÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
        </a>
        
        <div class="analysis-hero fade-in">
            <h1 class="analysis-title">üîç In-depth Analysis</h1>
            <p class="analysis-subtitle">Ïª§Ìîº ÏãúÏû• Ïã¨Ï∏µ Î∂ÑÏÑù Î≥¥Í≥†ÏÑú</p>
        </div>
        
        <div class="info-card fade-in" style="animation-delay: 0.1s;">
            <h2 class="info-header">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"/>
                </svg>
                In-depth Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏
            </h2>
            <p class="info-text">
                Ïª§Ìîº ÏãúÏû•Ïùò ÌäπÎ≥Ñ Ïù¥ÏäàÏôÄ Ïã¨Ï∏µ Î∂ÑÏÑùÏùÑ Îã§Î£®Îäî Î≥¥Í≥†ÏÑúÎì§ÏûÖÎãàÎã§. 
                Ï£ºÍ∞Ñ ÎèôÌñ• Ïô∏Ïóê ÌäπÏ†ï Ï£ºÏ†úÏóê ÎåÄÌïú ÍπäÏù¥ ÏûàÎäî Î∂ÑÏÑùÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§.
            </p>
            
            <div class="feature-list">
                <div class="feature-item">
                    <svg class="feature-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                    </svg>
                    <span>Îã®Í∏∞ Í∞ÄÍ≤© Ï†ÑÎßùÍ≥º Î∞©Ìñ•ÏÑ± Î∂ÑÏÑù</span>
                </div>
                <div class="feature-item">
                    <svg class="feature-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"/>
                    </svg>
                    <span>Í∏∞Ïà†Ï†Å Î∂ÑÏÑùÍ≥º Ï∞®Ìä∏ Ìå®ÌÑ¥</span>
                </div>
                <div class="feature-item">
                    <svg class="feature-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    <span>ÌäπÎ≥Ñ Ïù¥Î≤§Ìä∏ Î∞è ÏãúÏû• Ï∂©Í≤© Î∂ÑÏÑù</span>
                </div>
                <div class="feature-item">
                    <svg class="feature-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                    </svg>
                    <span>Ïû•Í∏∞ Ìä∏Î†åÎìúÏôÄ Íµ¨Ï°∞Ï†Å Î≥ÄÌôî</span>
                </div>
                <div class="feature-item">
                    <svg class="feature-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                    </svg>
                    <span>Ïù∏Ìè¨Í∑∏ÎûòÌîΩ Î∞è ÏãúÍ∞ÅÌôî ÏûêÎ£å</span>
                </div>
            </div>
        </div>
        
        <div id="loadingState" class="loading-spinner fade-in" style="animation-delay: 0.2s;">
            <div class="spinner"></div>
            <p style="margin-top: 16px;">Î¶¨Ìè¨Ìä∏Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
        </div>
        
        <div class="analysis-grid" id="analysisGrid" style="display: none;">
            <!-- Analysis reports will be dynamically loaded here -->
        </div>
        
        <div class="empty-state" id="emptyState" style="display: none;">
            <div class="empty-state-icon">üìä</div>
            <h3>Ïã¨Ï∏µ Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏Í∞Ä ÏóÜÏäµÎãàÎã§</h3>
            <p>ÏïÑÏßÅ Ïã¨Ï∏µ Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏Í∞Ä Îì±Î°ùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.</p>
        </div>
    </div>

    <script>
        // Optimized in-depth analysis report manager
        class AnalysisReportManager {
            constructor() {
                this.reports = [];
                this.loading = true;
                this.specialReports = {
                    'Reports/2025/08/2025-08-17.html': {
                        title: 'ÌçºÌéôÌä∏ Ïä§ÌÜ∞: 2025ÎÖÑ Ïª§Ìîº Í∞ÄÍ≤© Í∏âÎì± Îî•Îã§Ïù¥Î∏å',
                        summary: '2025ÎÖÑ Ïª§Ìîº ÏãúÏû•Ïùò ÏôÑÎ≤ΩÌïú Ìè≠ÌíçÏùÑ Î∂ÑÏÑùÌï©ÎãàÎã§. Í∏∞ÌõÑ Î≥ÄÌôî, Í≥µÍ∏âÎßù ÏúÑÍ∏∞, ÏàòÏöî Í∏âÏ¶ùÏù¥ ÎèôÏãúÏóê Î∞úÏÉùÌïòÎ©∞ Ïó≠ÏÇ¨Ï†ÅÏù∏ Í∞ÄÍ≤© Í∏âÎì±ÏùÑ Ï¥àÎûòÌïú ÏöîÏù∏Îì§ÏùÑ Ïã¨Ï∏µ Î∂ÑÏÑùÌï©ÎãàÎã§.',
                        tags: ['Ïã¨Ï∏µÎ∂ÑÏÑù', 'Í∞ÄÍ≤©Í∏âÎì±', 'ÌçºÌéôÌä∏Ïä§ÌÜ∞', 'Í∏∞ÌõÑÎ≥ÄÌôî', 'Í≥µÍ∏âÎßùÏúÑÍ∏∞']
                    },
                    'Reports/2025/06/2025-06-14.html': {
                        title: 'Îã®Í∏∞ Ïª§Ìîº ÏÑ†Î¨º Í∞ÄÍ≤© Ï†ÑÎßù Î∞è Î∞©Ìñ•ÏÑ± Ï†êÍ≤Ä',
                        summary: 'KCN25Îäî 349.90ÏÑºÌä∏Î°ú +0.60% ÏÉÅÏäπÌïòÎ©∞ 1Ï∞® ÏßÄÏßÄÏÑ†ÏùÑ ÏÉÅÌöå ÌöåÎ≥µÌñàÏäµÎãàÎã§. Îã®Í∏∞Ï†ÅÏúºÎ°úÎäî Î∏åÎùºÏßà ÏàòÌôï ÏßÑÌñâÍ≥º Ìà¨Í∏∞Ï†Å Ïàè Ìè¨ÏßÄÏÖòÏù¥ ÌïòÎ∞© ÏïïÎ†•ÏúºÎ°ú ÏûëÏö©Ìï©ÎãàÎã§.',
                        tags: ['Îã®Í∏∞Ï†ÑÎßù', 'Í∏∞Ïà†Ï†ÅÎ∂ÑÏÑù', 'Î∏åÎùºÏßàÏàòÌôï', 'ÏïÑÎùºÎπÑÏπ¥Ï†ÅÏûê', 'Ìà¨Í∏∞Ìè¨ÏßÄÏÖò']
                    },
                    'Reports/2025/06/2025-06-24.html': {
                        title: 'Ïª§Ìîº Í∞ÄÍ≤©, Ìè≠Ìíç Ï†ÑÏïº - ÏïÑÎùºÎπÑÏπ¥ ÏãúÏû• Ïù∏Ìè¨Í∑∏ÎûòÌîΩ',
                        summary: 'ÏïÑÎùºÎπÑÏπ¥ Ïª§Ìîº ÏãúÏû•ÏùÄ Í∞ïÎ†•Ìïú Í∞ïÏÑ∏ ÏöîÏù∏Í≥º Ïû†Ïû¨Ï†Å ÏïΩÏÑ∏ Î¶¨Ïä§ÌÅ¨Í∞Ä Ï∂©ÎèåÌïòÎ©∞ ÎÜíÏùÄ Î≥ÄÎèôÏÑ±ÏùÑ ÏòàÍ≥†ÌïòÍ≥† ÏûàÏäµÎãàÎã§.',
                        tags: ['Ïù∏Ìè¨Í∑∏ÎûòÌîΩ', 'Í∞ÄÍ≤©Ï†ÑÎßù', 'Î∏åÎùºÏßàÏÑúÎ¶¨', 'Í≥µÍ∏âÎ∂ÄÏ°±', 'Î≥ÄÎèôÏÑ±']
                    }
                };
            }

            async init() {
                await this.loadReports();
                this.render();
            }

            async loadReports() {
                try {
                    // Try loading from reports.json
                    const response = await fetch('reports.json');
                    if (response.ok) {
                        const data = await response.json();
                        this.reports = (data.reports || []).filter(report => 
                            this.isAnalysisReport(report)
                        );
                    }
                } catch (error) {
                    console.error('Failed to load reports:', error);
                    // Fallback to file scanning
                    this.reports = await this.scanAnalysisReports();
                }

                // Sort by date (newest first)
                this.reports.sort((a, b) => new Date(b.date) - new Date(a.date));
                this.loading = false;
            }

            isAnalysisReport(report) {
                // Check if it's specifically marked as in-depth
                if (report.type === 'in-depth' || report.type === 'in-depth-analysis') return true;
                
                // Exclude weekly reports
                const title = report.title || '';
                const isWeekly = title.includes('Ï£ºÍ∞Ñ ÎèôÌñ•') || 
                                title.includes('Ïª§Ìîº ÏãúÏû• Ï£ºÍ∞Ñ ÎèôÌñ•') || 
                                title.includes('Ïª§Ìîº ÏÑ†Î¨º ÏãúÏû• Ï£ºÍ∞Ñ ÎèôÌñ•');
                
                return !isWeekly;
            }

            async scanAnalysisReports() {
                // Simplified scanning for in-depth analysis reports
                const analysisReports = [];
                const knownAnalysisFiles = [
                    'Reports/2025/09/2025-09-18.html',
                    'Reports/2025/09/2025-09-16.html',
                    'Reports/2025/09/2025-09-13.html',
                    'Reports/2025/09/2025-09-07.html',
                    'Reports/2025/08/2025-08-30.html',
                    'Reports/2025/08/2025-08-25.html',
                    'Reports/2025/08/2025-08-23.html',
                    'Reports/2025/08/2025-08-17.html',
                    'Reports/2025/08/2025-08-16.html',
                    'Reports/2025/08/2025-08-11.html',
                    'Reports/2025/08/2025-08-09.html',
                    'Reports/2025/08/2025-08-04.html',
                    'Reports/2025/06/2025-06-24.html',
                    'Reports/2025/06/2025-06-14.html',
                    'Reports/2025/06/2025-06-13.html',
                    'Reports/2025/06/2025-06-08.html'
                ];

                for (const file of knownAnalysisFiles) {
                    try {
                        // Check if it's a special report
                        if (this.specialReports[file]) {
                            const dateMatch = file.match(/(\d{4}-\d{2}-\d{2})/);
                            analysisReports.push({
                                ...this.specialReports[file],
                                date: dateMatch ? dateMatch[1] : new Date().toISOString().split('T')[0],
                                link: file
                            });
                            continue;
                        }

                        const response = await fetch(file);
                        if (response.ok) {
                            const html = await response.text();
                            const metadata = this.extractMetadata(html, file);
                            if (metadata && this.isAnalysisReport(metadata)) {
                                analysisReports.push({
                                    ...metadata,
                                    link: file
                                });
                            }
                        }
                    } catch (error) {
                        // Skip failed files
                    }
                }

                return analysisReports;
            }

            extractMetadata(html, filePath) {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                const dateMatch = filePath.match(/(\d{4}-\d{2}-\d{2})/);
                const date = dateMatch ? dateMatch[1] : new Date().toISOString().split('T')[0];
                
                const title = doc.querySelector('h1')?.textContent?.trim() || 'Ïª§Ìîº ÏãúÏû• Î∂ÑÏÑù';
                const summary = doc.querySelector('.highlight p, .main-story p, p')?.textContent?.trim().substring(0, 200) || '';
                
                const tags = Array.from(doc.querySelectorAll('.tag'))
                    .map(tag => tag.textContent.trim())
                    .filter(Boolean)
                    .slice(0, 6);

                return {
                    title,
                    date,
                    summary: summary ? summary + '...' : 'Ïª§Ìîº ÏãúÏû• Î∂ÑÏÑù Î≥¥Í≥†ÏÑúÏûÖÎãàÎã§.',
                    tags: tags.length ? tags : ['Ïª§ÌîºÏãúÏû•', 'Î∂ÑÏÑù']
                };
            }

            render() {
                const loadingEl = document.getElementById('loadingState');
                const gridEl = document.getElementById('analysisGrid');
                const emptyEl = document.getElementById('emptyState');

                if (this.loading) return;

                loadingEl.style.display = 'none';

                if (this.reports.length === 0) {
                    emptyEl.style.display = 'block';
                    return;
                }

                gridEl.style.display = 'grid';
                gridEl.innerHTML = '';

                this.reports.forEach((report, index) => {
                    const card = this.createReportCard(report);
                    card.style.animationDelay = `${0.2 + index * 0.05}s`;
                    card.classList.add('fade-in');
                    gridEl.appendChild(card);
                });
            }

            createReportCard(report) {
                const card = document.createElement('article');
                card.className = 'analysis-card';
                
                const isNew = (new Date() - new Date(report.date)) < 7 * 24 * 60 * 60 * 1000;
                
                card.innerHTML = `
                    <div class="analysis-meta">
                        <time class="analysis-date">${this.formatDate(report.date)}</time>
                        ${isNew ? '<span class="badge badge-new">NEW</span>' : ''}
                    </div>
                    <h3 class="analysis-heading">${report.title}</h3>
                    <p class="analysis-summary">${report.summary}</p>
                    <div class="analysis-tags">
                        ${report.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    <a href="${report.link}" class="analysis-link">
                        ÏûêÏÑ∏Ìûà Î≥¥Í∏∞ <span>‚Üí</span>
                    </a>
                `;

                card.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('analysis-link')) {
                        window.location.href = report.link;
                    }
                });

                return card;
            }

            formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            const manager = new AnalysisReportManager();
            manager.init();
        });
    </script>
</body>
</html>